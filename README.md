# PersonalHealthbars

–ú–æ–¥ –¥–ª—è Warhammer 40,000: Darktide, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª–æ—Å–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è –¥–ª—è –≤–∞–∂–Ω—ã—Ö –≤—Ä–∞–≥–æ–≤ —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π —É—Ä–æ–≤–Ω—è –∑–¥–æ—Ä–æ–≤—å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —É—Ä–æ–Ω–∞ –æ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞.

## –û–ø–∏—Å–∞–Ω–∏–µ

PersonalHealthbars –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª–æ—Å–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è –∏ –∫—Ä—É–≥–∏ –Ω–∞–¥ –≤—Ä–∞–≥–∞–º–∏, –Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤—Ä–∞–≥–æ–≤:
- **Boss** (–±–æ—Å—Å—ã) - –≤—Å–µ –±–æ—Å—Å—ã –∏ –º–æ–Ω—Å—Ç—Ä—ã
- **Elite** (—ç–ª–∏—Ç–Ω—ã–µ) - —ç–ª–∏—Ç–Ω—ã–µ –≤—Ä–∞–≥–∏
- **Special** (—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ) - —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –≤—Ä–∞–≥–∏
- **Captain** (–∫–∞–ø–∏—Ç–∞–Ω—ã) - –∫–∞–ø–∏—Ç–∞–Ω—ã –∏ –∫—É–ª—å—Ç–∏—Å—Ç-–∫–∞–ø–∏—Ç–∞–Ω—ã

–û–±—ã—á–Ω—ã–µ –º–æ–±—ã (infested, unarmoured –∏ —Ç.–¥.) **–Ω–µ** –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø–æ–ª–æ—Å–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –∑–¥–æ—Ä–æ–≤—å—è
- üü¢ **–ó–µ–ª–µ–Ω—ã–π** - –∑–¥–æ—Ä–æ–≤—å–µ ‚â• 50%
- üü° **–ñ–µ–ª—Ç—ã–π** - –∑–¥–æ—Ä–æ–≤—å–µ –æ—Ç 25% –¥–æ 50%
- üî¥ **–ö—Ä–∞—Å–Ω—ã–π** - –∑–¥–æ—Ä–æ–≤—å–µ < 25%

### –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Ä–æ–Ω–∞
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É—Ä–æ–Ω, –Ω–∞–Ω–µ—Å–µ–Ω–Ω—ã–π **—Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–º –∏–≥—Ä–æ–∫–æ–º**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–ø–∞–¥–∞–Ω–∏—è (–∂–µ–ª—Ç—ã–º —Ü–≤–µ—Ç–æ–º)
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ —Å–ª–∞–±—ã–µ –º–µ—Å—Ç–∞ (–æ—Ä–∞–Ω–∂–µ–≤—ã–º —Ü–≤–µ—Ç–æ–º)
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç DPS (—É—Ä–æ–Ω –≤ —Å–µ–∫—É–Ω–¥—É) –ø–æ—Å–ª–µ —Å–º–µ—Ä—Ç–∏ –≤—Ä–∞–≥–∞
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–∏–ø –±—Ä–æ–Ω–∏ –ø–æ—Ä–∞–∂–µ–Ω–Ω–æ–π –∑–æ–Ω—ã

### –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- –ö—Ä—É–≥–ª—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–¥–æ—Ä–æ–≤—å—è (–≤—Å–µ–≥–¥–∞ –ø–æ–ª–Ω—ã–π, –º–µ–Ω—è–µ—Ç —Ü–≤–µ—Ç)
- –ü–æ–ª–æ—Å–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
- –ß–∏—Å–ª–∞ —É—Ä–æ–Ω–∞ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è/—Å–∂–∞—Ç–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ —Å–º–µ—Ä—Ç–∏ –≤—Ä–∞–≥–∞

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–∞–ø–∫—É `PersonalHealthbars` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –º–æ–¥–æ–≤:
   ```
   <Steam>/steamapps/common/Warhammer 40,000 DARKTIDE/mods/
   ```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–≥—Ä—É –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –º–æ–¥ —á–µ—Ä–µ–∑ –º–µ–Ω—é –º–æ–¥–æ–≤

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
PersonalHealthbars/
‚îú‚îÄ‚îÄ PersonalHealthbars.mod          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥–∞
‚îú‚îÄ‚îÄ README.md                        # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
‚îî‚îÄ‚îÄ scripts/
    ‚îî‚îÄ‚îÄ mods/
        ‚îî‚îÄ‚îÄ PersonalHealthbars/
            ‚îú‚îÄ‚îÄ PersonalHealthbars.lua          # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –º–æ–¥–∞
            ‚îú‚îÄ‚îÄ HealthbarMarker.lua             # –®–∞–±–ª–æ–Ω –º–∞—Ä–∫–µ—Ä–∞ –∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥
            ‚îú‚îÄ‚îÄ PersonalHealthbars_data.lua     # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥–∞
            ‚îî‚îÄ‚îÄ PersonalHealthbars_localization.lua  # –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —É—Ä–æ–Ω–∞
–ú–æ–¥ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —É—Ä–æ–Ω —Ç–æ–ª—å–∫–æ –æ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞ —á–µ—Ä–µ–∑ —Ö—É–∫ `AttackReportManager.add_attack_result`. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ:
- –£—Ä–æ–Ω –æ—Ç –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- –£—Ä–æ–Ω –æ—Ç —Å–æ—é–∑–Ω–∏–∫–æ–≤ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- –¢–æ–ª—å–∫–æ –≤–∞—à —É—Ä–æ–Ω —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤ —Ä–∞—Å—á–µ—Ç–∞—Ö

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤—Ä–∞–≥–æ–≤
–§—É–Ω–∫—Ü–∏—è `should_enable_healthbar()` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –Ω—É–∂–Ω–æ –ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª–æ—Å–∫—É –∑–¥–æ—Ä–æ–≤—å—è –¥–ª—è –≤—Ä–∞–≥–∞:
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–≥—Ä–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∏–ø –≤—Ä–∞–≥–∞ —á–µ—Ä–µ–∑ `breed.enemy_type()`
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ–≥–∏ –≤—Ä–∞–≥–∞ (boss, elite, special, captain)
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `true` —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω—É–∂–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤—Ä–∞–≥–æ–≤

### –†–µ–Ω–¥–µ—Ä–∏–Ω–≥
–ú–∞—Ä–∫–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º—É `HudElementWorldMarkers` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:
- –ü–æ–ª–æ—Å–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
- –ö—Ä—É–≥–ª—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–¥–æ—Ä–æ–≤—å—è
- –ß–∏—Å–ª–∞ —É—Ä–æ–Ω–∞ —Å —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±—Ä–æ–Ω–µ –∏ DPS

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∞—Ä–∫–µ—Ä–∞
- **–†–∞–∑–º–µ—Ä**: 120x6 –ø–∏–∫—Å–µ–ª–µ–π
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è**: 25 –º–µ—Ç—Ä–æ–≤
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω–∏–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏**: –≤–∫–ª—é—á–µ–Ω–∞
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ —Å–º–µ—Ä—Ç–∏**: 0.5 —Å–µ–∫—É–Ω–¥—ã

## API –∏ —Ñ—É–Ω–∫—Ü–∏–∏

### PersonalHealthbars.lua

#### `should_enable_healthbar(unit)`
–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –Ω—É–∂–Ω–æ –ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª–æ—Å–∫—É –∑–¥–æ—Ä–æ–≤—å—è –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —é–Ω–∏—Ç–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `unit` (userdata) - —é–Ω–∏—Ç –≤—Ä–∞–≥–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `boolean` - `true` –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª–æ—Å–∫—É –∑–¥–æ—Ä–æ–≤—å—è, `false` –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ

**–õ–æ–≥–∏–∫–∞:**
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–≥—Ä–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞
2. –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø–æ—Ä–æ–¥–µ (breed) –≤—Ä–∞–≥–∞
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –≤—Ä–∞–≥ –±–æ—Å—Å–æ–º
4. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∏–ø –≤—Ä–∞–≥–∞ (elite, special, captain)
5. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ–≥–∏ –≤—Ä–∞–≥–∞ –∫–∞–∫ –∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç

#### –•—É–∫ `AttackReportManager.add_attack_result`
–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —É—Ä–æ–Ω, –Ω–∞–Ω–µ—Å–µ–Ω–Ω—ã–π –ª–æ–∫–∞–ª—å–Ω—ã–º –∏–≥—Ä–æ–∫–æ–º.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `self` - —ç–∫–∑–µ–º–ø–ª—è—Ä AttackReportManager
- `damage_profile` - –ø—Ä–æ—Ñ–∏–ª—å —É—Ä–æ–Ω–∞
- `attacked_unit` - –∞—Ç–∞–∫–æ–≤–∞–Ω–Ω—ã–π —é–Ω–∏—Ç
- `attacking_unit` - –∞—Ç–∞–∫—É—é—â–∏–π —é–Ω–∏—Ç
- `attack_direction` - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞—Ç–∞–∫–∏
- `hit_world_position` - –ø–æ–∑–∏—Ü–∏—è –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ –º–∏—Ä–µ
- `hit_weakspot` - –ø–æ–ø–∞–¥–∞–Ω–∏–µ –≤ —Å–ª–∞–±–æ–µ –º–µ—Å—Ç–æ
- `damage` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Ä–æ–Ω–∞
- `attack_result` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞—Ç–∞–∫–∏
- `attack_type` - —Ç–∏–ø –∞—Ç–∞–∫–∏
- `damage_efficiency` - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —É—Ä–æ–Ω–∞
- `is_critical_strike` - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ø–∞–¥–∞–Ω–∏–µ

**–î–µ–π—Å—Ç–≤–∏—è:**
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —É—Ä–æ–Ω –≤ `mod._player_damage[attacked_unit]`
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –≤ `mod._last_hit_info[attacked_unit]`

#### –•—É–∫ `HealthExtension.init`
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–ª–æ—Å–∫—É –∑–¥–æ—Ä–æ–≤—å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∑–¥–æ—Ä–æ–≤—å—è.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `_self` - —ç–∫–∑–µ–º–ø–ª—è—Ä HealthExtension
- `_extension_init_context` - –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- `unit` - —é–Ω–∏—Ç
- `_extension_init_data` - –¥–∞–Ω–Ω—ã–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- `_game_object_data` - –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞

**–î–µ–π—Å—Ç–≤–∏—è:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω—É–∂–Ω–æ –ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª–æ—Å–∫—É –∑–¥–æ—Ä–æ–≤—å—è
- –°–æ–∑–¥–∞–µ—Ç –º–∞—Ä–∫–µ—Ä —á–µ—Ä–µ–∑ `add_world_marker_unit`

#### –•—É–∫ `HuskHealthExtension.init`
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–ª–æ—Å–∫—É –∑–¥–æ—Ä–æ–≤—å—è –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö —é–Ω–∏—Ç–æ–≤ (husks).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `self` - —ç–∫–∑–µ–º–ø–ª—è—Ä HuskHealthExtension
- `_extension_init_context` - –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- `unit` - —é–Ω–∏—Ç
- `_extension_init_data` - –¥–∞–Ω–Ω—ã–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- `_game_session` - –∏–≥—Ä–æ–≤–∞—è —Å–µ—Å—Å–∏—è
- `_game_object_id` - ID –∏–≥—Ä–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
- `_owner_id` - ID –≤–ª–∞–¥–µ–ª—å—Ü–∞

**–î–µ–π—Å—Ç–≤–∏—è:**
- –ö–æ–ø–∏—Ä—É–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–µ—Ç–æ–¥—ã –∏–∑ HealthExtension
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω—É–∂–Ω–æ –ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª–æ—Å–∫—É –∑–¥–æ—Ä–æ–≤—å—è
- –°–æ–∑–¥–∞–µ—Ç –º–∞—Ä–∫–µ—Ä —á–µ—Ä–µ–∑ `add_world_marker_unit`

### HealthbarMarker.lua

#### `get_health_color(health_percent)`
–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ü–≤–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–¥–æ—Ä–æ–≤—å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –∑–¥–æ—Ä–æ–≤—å—è.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `health_percent` (number) - –ø—Ä–æ—Ü–µ–Ω—Ç –∑–¥–æ—Ä–æ–≤—å—è –æ—Ç 0.0 –¥–æ 1.0

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `table` - –º–∞—Å—Å–∏–≤ —Ü–≤–µ—Ç–æ–≤ RGBA {alpha, red, green, blue}
  - –ó–µ–ª–µ–Ω—ã–π: `{255, 0, 255, 0}` –¥–ª—è health_percent >= 0.5
  - –ñ–µ–ª—Ç—ã–π: `{255, 255, 255, 0}` –¥–ª—è health_percent >= 0.25
  - –ö—Ä–∞—Å–Ω—ã–π: `{255, 255, 0, 0}` –¥–ª—è health_percent < 0.25

#### `template.create_widget_defintion(template, scenegraph_id)`
–°–æ–∑–¥–∞–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞ –¥–ª—è –ø–æ–ª–æ—Å–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `template` (table) - —à–∞–±–ª–æ–Ω –º–∞—Ä–∫–µ—Ä–∞
- `scenegraph_id` (string) - ID —Å—Ü–µ–Ω–æ–≥—Ä–∞—Ñ–∞

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
- `table` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞ UIWidget

**–°–æ–∑–¥–∞–µ—Ç:**
- –õ–æ–≥–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ö–æ–¥ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–∏—Å–µ–ª —É—Ä–æ–Ω–∞
- –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω—ã–π –ø—Ä–æ—Ö–æ–¥ –¥–ª—è –∫—Ä—É–≥–ª–æ–≥–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–¥–æ—Ä–æ–≤—å—è

#### `template.on_enter(widget, marker, template)`
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∏–¥–∂–µ—Ç –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–∞—Ä–∫–µ—Ä–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `widget` (table) - –≤–∏–¥–∂–µ—Ç UI
- `marker` (table) - –º–∞—Ä–∫–µ—Ä
- `template` (table) - —à–∞–±–ª–æ–Ω –º–∞—Ä–∫–µ—Ä–∞

**–î–µ–π—Å—Ç–≤–∏—è:**
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–∞–π–º–µ—Ä—ã
- –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç —É—Ä–æ–Ω –∏ —á–∏—Å–ª–∞ —É—Ä–æ–Ω–∞
- –°–æ–∑–¥–∞–µ—Ç –ª–æ–≥–∏–∫—É –ø–æ–ª–æ—Å–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø–æ—Ä–æ–¥–µ –≤—Ä–∞–≥–∞
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–º–µ—â–µ–Ω–∏–µ –≥–æ–ª–æ–≤—ã

#### `template.update_function(parent, ui_renderer, widget, marker, template, dt, t)`
–û–±–Ω–æ–≤–ª—è–µ—Ç –≤–∏–¥–∂–µ—Ç –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `parent` (table) - —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —ç–ª–µ–º–µ–Ω—Ç
- `ui_renderer` (UIRenderer) - —Ä–µ–Ω–¥–µ—Ä–µ—Ä UI
- `widget` (table) - –≤–∏–¥–∂–µ—Ç
- `marker` (table) - –º–∞—Ä–∫–µ—Ä
- `template` (table) - —à–∞–±–ª–æ–Ω
- `dt` (number) - –¥–µ–ª—å—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏
- `t` (number) - —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ü–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –∑–¥–æ—Ä–æ–≤—å—è
2. –ü–æ–ª—É—á–∞–µ—Ç —É—Ä–æ–Ω –æ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞
3. –í—ã—á–∏—Å–ª—è–µ—Ç —Å–º–µ—â–µ–Ω–∏–µ –≥–æ–ª–æ–≤—ã –¥–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
4. –û–±–Ω–æ–≤–ª—è–µ—Ç —á–∏—Å–ª–∞ —É—Ä–æ–Ω–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —É—Ä–æ–Ω–∞
5. –û–±–Ω–æ–≤–ª—è–µ—Ç –ª–æ–≥–∏–∫—É –ø–æ–ª–æ—Å–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è
6. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ü–≤–µ—Ç –∫—Ä—É–≥–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–¥–æ—Ä–æ–≤—å—è
7. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–∏–¥–∏–º–æ—Å—Ç—å –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
8. –£–¥–∞–ª—è–µ—Ç –º–∞—Ä–∫–µ—Ä –ø—Ä–∏ —Å–º–µ—Ä—Ç–∏ –≤—Ä–∞–≥–∞

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –º–æ–¥–∞

### `mod._player_damage`
–¢–∞–±–ª–∏—Ü–∞, —Ö—Ä–∞–Ω—è—â–∞—è –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π —É—Ä–æ–Ω –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —é–Ω–∏—Ç–∞.
- **–ö–ª—é—á**: `unit` (userdata) - —é–Ω–∏—Ç –≤—Ä–∞–≥–∞
- **–ó–Ω–∞—á–µ–Ω–∏–µ**: `number` - –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π —É—Ä–æ–Ω

### `mod._last_hit_info`
–¢–∞–±–ª–∏—Ü–∞, —Ö—Ä–∞–Ω—è—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ—Å–ª–µ–¥–Ω–µ–º –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —é–Ω–∏—Ç–∞.
- **–ö–ª—é—á**: `unit` (userdata) - —é–Ω–∏—Ç –≤—Ä–∞–≥–∞
- **–ó–Ω–∞—á–µ–Ω–∏–µ**: `table` - —Ç–∞–±–ª–∏—Ü–∞ —Å –ø–æ–ª—è–º–∏:
  - `was_critical` (boolean) - –±—ã–ª–æ –ª–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ø–∞–¥–∞–Ω–∏–µ
  - `hit_weakspot` (boolean) - –ø–æ–ø–∞–¥–∞–Ω–∏–µ –≤ —Å–ª–∞–±–æ–µ –º–µ—Å—Ç–æ
  - `last_hit_zone_name` (string|nil) - –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–æ–Ω—ã –ø–æ–ø–∞–¥–∞–Ω–∏—è

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∞—Ä–∫–µ—Ä–∞

### –†–∞–∑–º–µ—Ä—ã
- –®–∏—Ä–∏–Ω–∞: 120 –ø–∏–∫—Å–µ–ª–µ–π
- –í—ã—Å–æ—Ç–∞: 6 –ø–∏–∫—Å–µ–ª–µ–π
- –†–∞–¥–∏—É—Å –∫—Ä—É–≥–∞: 3 –ø–∏–∫—Å–µ–ª—è

### –î–∏—Å—Ç–∞–Ω—Ü–∏—è
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è –≤–∏–¥–∏–º–æ—Å—Ç–∏: 25 –º–µ—Ç—Ä–æ–≤
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è –¥–ª—è –∑–∞—Ç—É—Ö–∞–Ω–∏—è: 12.5 –º–µ—Ç—Ä–æ–≤

### –ê–Ω–∏–º–∞—Ü–∏—è
- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ –∑–¥–æ—Ä–æ–≤—å—è: 0.5 —Å–µ–∫—É–Ω–¥—ã
- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–∑—Ä–∞–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è: 0.2 —Å–µ–∫—É–Ω–¥—ã
- –ü–æ—Ä–æ–≥ –∞–Ω–∏–º–∞—Ü–∏–∏ –∑–¥–æ—Ä–æ–≤—å—è: 0.1 (10%)

### –ß–∏—Å–ª–∞ —É—Ä–æ–Ω–∞
- –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 17
- –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –¥–ª—è —Å–æ—Ç–µ–Ω: 14.4
- –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ DPS: 14.4
- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è: 3 —Å–µ–∫—É–Ω–¥—ã
- –ó–∞–¥–µ—Ä–∂–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è: 0.2 —Å–µ–∫—É–Ω–¥—ã
- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∂–∞—Ç–∏—è: 1 —Å–µ–∫—É–Ω–¥–∞
- –ó–∞–¥–µ—Ä–∂–∫–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏: 5 —Å–µ–∫—É–Ω–¥
- –ó–∞–¥–µ—Ä–∂–∫–∞ –∑–∞—Ç—É—Ö–∞–Ω–∏—è: 0.35 —Å–µ–∫—É–Ω–¥—ã

### –¶–≤–µ—Ç–∞
- –û–±—ã—á–Ω—ã–π —É—Ä–æ–Ω: –±–µ–ª—ã–π
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É—Ä–æ–Ω: –∂–µ–ª—Ç—ã–π
- –ü–æ–ø–∞–¥–∞–Ω–∏–µ –≤ —Å–ª–∞–±–æ–µ –º–µ—Å—Ç–æ: –æ—Ä–∞–Ω–∂–µ–≤—ã–π

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–ú–æ–¥ —Å–æ–≤–º–µ—Å—Ç–∏–º —Å:
- Darktide Mod Framework (DMF)
- –î—Ä—É–≥–∏–º–∏ –º–æ–¥–∞–º–∏, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–º–∏ —Å–∏—Å—Ç–µ–º—É –º–∞—Ä–∫–µ—Ä–æ–≤

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. –£—Ä–æ–Ω –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞
2. –ü–æ–ª–æ—Å–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è boss, elite, special, captain
3. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è –≤–∏–¥–∏–º–æ—Å—Ç–∏: 25 –º–µ—Ç—Ä–æ–≤
4. –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω–∏–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

## –õ–∏—Ü–µ–Ω–∑–∏—è

–û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ –º–æ–¥–µ Healthbars –æ—Ç raindish.

## –ê–≤—Ç–æ—Ä

–ú–æ–¥ —Å–æ–∑–¥–∞–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ Healthbars –æ—Ç raindish, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ —É—Ä–æ–Ω–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ç–∏–ø–∞–º –≤—Ä–∞–≥–æ–≤.



